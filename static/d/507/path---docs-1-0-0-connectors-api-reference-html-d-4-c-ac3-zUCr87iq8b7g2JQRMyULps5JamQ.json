{"data":{"markdownRemark":{"html":"<h1 id=\"connector-api\"><a href=\"#connector-api\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connector API</h1>\n<p>Connector exposes API and it’s API where you have a set of identities. Fog Controller has the proper identity and it’s able to tell Connector “I want you to open up some connections”. Fog Controller uses Connector API to tell it to do and Connector simply replies whether it is successful or not successful.</p>\n<p>ioFog Agent connects to Connectors and through connecting Connectors traffic is able to move between fog nodes. In addition Connector has the capability to open traffic to the outside world so the outside users can get route into fog node.</p>\n<h3 id=\"connector-offers-two-connectivity-types\"><a href=\"#connector-offers-two-connectivity-types\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connector offers two connectivity types:</h3>\n<p><strong>1) The first type, called a public pipe, provides a way to securely access Fog software and data from anywhere on in the world. Connector punches through firewalls and NATed networks to perform automatic internetworking of the Fog.</strong></p>\n<p>Let’s describe what mapping is. Mapping is a way for describing a port opening, no matter whether you create a public or private pipe. It is an object that has an internal and an external port.</p>\n<p><strong>The Endpoint and Response (below) of a public pipe connection is displayed below (Add functionality):</strong></p>\n<p><strong>Request</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\">Endpoint<span class=\"token operator\">:</span> /api/v2/mapping/add\nMethod<span class=\"token operator\">:</span> POST\nHeader Content-Type<span class=\"token operator\">:</span> application/x-www-form-urlencoded\nParameters<span class=\"token operator\">:</span> mapping=<span class=\"token punctuation\">{</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"public\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"maxconnections\"</span><span class=\"token operator\">:</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"heartbeatabsencethreshold\"</span><span class=\"token operator\">:</span><span class=\"token number\">200000</span><span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>\"maxconnections\" means how many connection threads the ioFog agent will make with the Connector. You can have many users at the same time.</p>\n<p>\"heartbeatabsencethreshold\" means if we don’t have a heartbeat signal from the ioFog agent within 20 sec, we kill that connection thread.</p>\n<p><strong>Response:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ok\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2ae8ff72-7447-47de-a4ec-123eb214d63e\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"port1\"</span><span class=\"token operator\">:</span> <span class=\"token number\">32768</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"port2\"</span><span class=\"token operator\">:</span> <span class=\"token number\">32769</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"passcode1\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0b403b65-c5a0-476f-92f5-ffc7ca0f85ef\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"passcode2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1542719018626</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>“id” is your ID for the mapping</p>\n<p>\"port1\" - port that will be used by the ioFog agent</p>\n<p>\"port2\" - port that will be by the Connector for public URL access</p>\n<p>\"passcode1” is used by the ioFog agent to establish a secure connection to the Connector. The Fog agent will receive the information through the Fog controller and tell you that you need to connect.</p>\n<p><strong>The Endpoint of public pipe connection is displayed below (Remove):</strong></p>\n<p><strong>Request</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\">Endpoint<span class=\"token operator\">:</span> /api/v2/mapping/remove\nMethod<span class=\"token operator\">:</span> POST\nHeader Content-Type<span class=\"token operator\">:</span> application/x-www-form-urlencoded\nParameters<span class=\"token operator\">:</span> mappingid=e2454159-ed8c-<span class=\"token number\">4</span>d00-a885-fdd87de811de</code></pre>\n      </div>\n<p><strong>Response:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ok\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2ae8ff72-7447-47de-a4ec-123eb214d63e\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1542719354334</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><strong>2) The second type, called a private pipe, consumes bandwidth on the Connector but stabilizes connectivity between Fog nodes that can’t normally see each other.</strong></p>\n<p>Connector is available for 2 different ioFog agents talking to each other.</p>\n<p><strong>The Endpoint and Response (below) of a private pipe connection is displayed below (Add functionality):</strong></p>\n<p><strong>Request</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\">Endpoint<span class=\"token operator\">:</span> /api/v2/mapping/add\nMethod<span class=\"token operator\">:</span> POST\nHeader Content-Type<span class=\"token operator\">:</span> application/x-www-form-urlencoded\nParameters<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"private\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"maxconnectionsport1\"</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"maxconnectionsport2\"</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"heartbeatabsencethresholdport1\"</span><span class=\"token operator\">:</span><span class=\"token number\">200000</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"heartbeatabsencethresholdport2\"</span><span class=\"token operator\">:</span><span class=\"token number\">200000</span><span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><strong>Response:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ok\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e2454159-ed8c-4d00-a885-fdd87de811de\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"port1\"</span><span class=\"token operator\">:</span> <span class=\"token number\">32770</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"port2\"</span><span class=\"token operator\">:</span> <span class=\"token number\">32771</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"passcode1\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3dbd413c-10e9-4e40-a9cb-f4b8fb2b8b56\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"passcode2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"7f4eb783-c2ab-4517-8aaf-c8395054193e\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1542719231127</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>The parameters description is the same as is described above for a public pipe.</p>\n<p>Here “port1\" will come out in \"port2\", and vice versa. Without the passcodes you will be immediately rejected.</p>\n<p><strong>The Endpoint of private pipe connection is displayed below (Remove):</strong></p>\n<p><strong>Request</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\">Endpoint<span class=\"token operator\">:</span> /api/v2/mapping/remove\nMethod<span class=\"token operator\">:</span> POST\nHeader Content-Type<span class=\"token operator\">:</span> application/x-www-form-urlencoded\nParameters<span class=\"token operator\">:</span> mappingid=e2454159-ed8c-<span class=\"token number\">4</span>d00-a885-fdd87de811de</code></pre>\n      </div>\n<p><strong>Response:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ok\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2ae8ff72-7447-47de-a4ec-123eb214d63e\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1542719354334</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<hr>\n<p><strong>In Public mode the URL is generated as follows:</strong></p>\n<p>Example: ${protocol}://${address}${port2}</p>\n<p>where</p>\n<p>{protocol} is either http:// or https://</p>\n<p>{address} is either IP address or domain name</p>\n<hr>\n<p>In iofog-connector.config file</p>\n<p>When \"dev\": true, it's http connection.</p>\n<p>When \"dev\": false, it's https connection.</p>","fields":{"slug":"/docs/1.0.0/connectors/api-reference.html"}},"allConfigJson":{"edges":[{"node":{"version":"1.0.0","menus":[{"title":"Getting Started","subMenus":[{"title":"Core Concepts","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/getting-started/core-concepts.html"}}}},{"title":"Quick Start","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/getting-started/quick-start.html"}}}},{"title":"Setup Your Controllers","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/getting-started/setup-your-controllers.html"}}}},{"title":"Setup Your Connectors","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/getting-started/setup-your-connectors.html"}}}},{"title":"Setup Your Agents","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/getting-started/setup-your-agents.html"}}}}]},{"title":"Tutorial","subMenus":[{"title":"Introduction","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/tutorial/introduction.html"}}}},{"title":"Get To Know ioFog","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/tutorial/get-to-know-iofog.html"}}}},{"title":"Manage Your Microservices","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/tutorial/manage-your-microservices.html"}}}},{"title":"Create Your First Microservice - JavaScript","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/tutorial/create-your-first-microservice-javascript.html"}}}},{"title":"Deploy Your Microservice","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/tutorial/deploy-your-microservice.html"}}}}]},{"title":"Writing Microservices","subMenus":[{"title":"Overview","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/writing-microservices/overview.html"}}}},{"title":"SDK","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/writing-microservices/sdk.html"}}}},{"title":"Debugging","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/writing-microservices/debugging.html"}}}}]},{"title":"Using System Microservices","subMenus":[{"title":"Diagnostics","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/using-system-microservices/diagnostics.html"}}}},{"title":"Hardware Abstraction Layer","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/using-system-microservices/hal.html"}}}},{"title":"Bluetooth REST API","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/using-system-microservices/rest-blue.html"}}}}]},{"title":"Using Public Catalog Microservices","subMenus":[{"title":"JSON REST API And Open Weather Map","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/using-public-catalog-microservices/jsonrestapi.html"}}}}]},{"title":"Controllers","subMenus":[{"title":"Overview","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/controllers/overview.html"}}}},{"title":"CLI Usage","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/controllers/cli-usage.html"}}}},{"title":"REST API Reference","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/controllers/rest-api.html"}}}}]},{"title":"Connectors","subMenus":[{"title":"Overview","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/connectors/overview.html"}}}},{"title":"CLI Usage","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/connectors/cli-usage.html"}}}},{"title":"API Reference","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/connectors/api-reference.html"}}}}]},{"title":"Agents","subMenus":[{"title":"Overview","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/agents/overview.html"}}}},{"title":"CLI Usage","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/agents/cli-usage.html"}}}},{"title":"Local API Reference","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/agents/local-api.html"}}}}]},{"title":"Contributing","subMenus":[{"title":"Guidelines","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/contributing/guidelines.html"}}}},{"title":"Code of Conduct","entry":{"childMarkdownRemark":{"fields":{"slug":"/docs/1.0.0/contributing/code-of-conduct.html"}}}}]}],"fields":{"path":"/docs/1.0.0/"}}}]}},"pageContext":{"slug":"/docs/1.0.0/connectors/api-reference.html"}}